---
- name: Set a hostname
  ansible.builtin.hostname:
    name: "{{ inventory_hostname }}"
    use: systemd
  become: true

- name: Get load balancer IP (1/2) - Retrieve IP address
  ansible.builtin.command: "{{ role_path }}/files/get-public-ip.sh"
  delegate_to: 127.0.0.1
  register: public_ip_script_output

- name: Get load balancer IP (2/2) - Set ip as fact
  ansible.builtin.set_fact:
    kubernetes_control_plane_node_load_balancer_ip: "{{ public_ip_script_output.stdout }}"

- name: Debug load balancer ip
  debug:
    msg: "Load balancer ip: {{ kubernetes_control_plane_node_load_balancer_ip }}"
